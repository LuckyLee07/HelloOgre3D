# AI 阅读建议提示块 (v7)

> 你现在拿到的是一个项目快照目录（snapshot/_ai_snapshot/）。
> 请严格按“推荐顺序”读取这些文件，并按要求产出分析结果。
> 如果信息不足，请明确说“不足”，并指出需要哪类补充（而不是凭空猜测）。

---

## 0. 推荐阅读顺序（必须按这个来）

1) `PROJECT_SNAPSHOT.md`
   - 获取：项目概览、核心候选入口、Top 模块、CORE 子图热点、第三方依赖概览

2) `entry_candidates.md`
   - 获取：Entry / Tick / Script 的候选文件清单（CORE 优先），以及提示词命中情况

3) `index.jsonl`
   - 获取：文件清单（lines/size/module2/module4/类别） + 过滤后的 symbols（类/函数/宏/namespace）
   - 任务：推断模块边界、找“最可能是系统骨架”的目录/文件

4) `edges.jsonl`
   - 获取：依赖关系（C++ include、Lua require/dofile、C++->Lua hint）
   - 任务：构建“入口->关键模块->脚本/AI系统”的依赖路径

5) `dir_map.jsonl`
   - 获取：全量目录树与文件类型分布（不读内容）
   - 任务：补齐宏观结构，确认有哪些系统/资源/脚本分布

6) `snapshot_meta.json`
   - 获取：快照的过滤规则、核心目录规则、模块粒度、阈值
   - 任务：避免误解（比如 ThirdParty 被折叠/跳过、读取大小限制等）

---

## 1. 第一轮输出（读完 1~2 之后就要给）

请输出以下结构（必须包含小标题）：

### A) 项目一句话总结
- 用一句话描述项目“是什么 + 核心循环大概在哪 + 用了哪些脚本/AI机制”。

### B) 入口链路猜测（Top 3）
- 每条链路形如：`入口文件 -> Tick/Loop -> AI/状态机/行为树 -> Lua脚本/资源`
- 每条链路说明：为什么这么推断（来自 candidates/提示词命中）

### C) 模块分区（module2 维度）
- 列出 Top 8 module2，并说明它们的可能职责
- 标注：哪些属于 CORE（按 CORE_PATH_PREFIXES）

---

## 2. 第二轮输出（读完 3~6 后再给）

### D) 依赖图关键点（基于 edges.jsonl）
- Top 10 “依赖最重的文件”（outgoing edges 多）
- Top 5 “依赖最重的 module2”
- 说明：哪些是“中心模块”、哪些是“叶子模块”

### E) AI/脚本相关路径（如果存在）
- 输出 Lua require 链路（3 条代表性链路）
- 输出 C++ 调 Lua 的证据（cpp_to_lua_hint）

### F) 风险与建议（面向工程推进）
- 3 个结构风险（比如：耦合、循环依赖、入口不清晰、脚本散落）
- 3 个可落地的下一步建议（具体到目录/文件）

---

## 3. 输出约束（必须遵守）

- 不要凭空猜测不存在的系统；只能基于 snapshot 文件中的证据推断。
- 如果遇到“未索引/太大跳过”的文件，要明确指出，并建议用更小的抽样/单独快照补齐。
- 任何结论都尽量指向：具体路径（文件/目录/module2）。

---

## 4. 你最终要交付的内容（必须给）

1) “入口链路 Top3” + 证据
2) “核心模块 Top8（module2）” + 职责猜测
3) “依赖中心 Top10 文件/Top5 模块”
4) “下一步建议（3 条可执行）”
